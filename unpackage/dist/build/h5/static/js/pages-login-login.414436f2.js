(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{1740:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r}));var r={uniForms:a("e02b").default,uniFormsItem:a("4d9e").default,uniEasyinput:a("0b66").default,myRegister:a("fb08").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"login-container"},[a("v-uni-view",{staticClass:"login-or-register-selector"},[a("v-uni-view",{class:{"selector-on":1==e.select,"selector-default":2==e.select},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSelect(1)}}},[e._v("登录")]),a("v-uni-view",{class:{"selector-on":2==e.select,"selector-default":1==e.select},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSelect(2)}}},[e._v("注册")])],1),e.userId?a("v-uni-view",[a("v-uni-view",{staticClass:"user-text"},[e._v("当前用户："+e._s(e.userName))]),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.logout.apply(void 0,arguments)}}},[e._v("退出登录")])],1):a("v-uni-view",{staticClass:"login-or-register"},[1==e.select?a("v-uni-view",{staticClass:"login-box"},[a("uni-forms",{ref:"baseForm",attrs:{modelValue:e.baseFormData,"label-position":"top"}},[a("uni-forms-item",{attrs:{label:"用户名",name:"name"}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:e.baseFormData.name,callback:function(t){e.$set(e.baseFormData,"name",t)},expression:"baseFormData.name"}})],1),a("uni-forms-item",{attrs:{label:"密码",name:"password"}},[a("uni-easyinput",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.baseFormData.password,callback:function(t){e.$set(e.baseFormData,"password",t)},expression:"baseFormData.password"}})],1),a("uni-forms-item",{attrs:{label:"验证码",name:"vcode"}},[a("img",{attrs:{src:e.vcode,alt:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCodePic.apply(void 0,arguments)}}}),a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.baseFormData.vcode,callback:function(t){e.$set(e.baseFormData,"vcode",t)},expression:"baseFormData.vcode"}})],1)],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("登录")])],1):e._e(),2==e.select?a("v-uni-view",{staticClass:"register-box"},[a("my-register",{attrs:{vcode:e.vcode,register:e.register,getCodePic:e.getCodePic}})],1):e._e()],1)],1)},s=[]},6704:function(e,t,a){"use strict";a.r(t);var r=a("1740"),n=a("935b");for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("f288");var o=a("f0c5"),i=Object(o["a"])(n["default"],r["b"],r["c"],!1,null,"3753176c",null,!1,r["a"],void 0);t["default"]=i.exports},"935b":function(e,t,a){"use strict";a.r(t);var r=a("b645"),n=a.n(r);for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t["default"]=n.a},"9cb6":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.login-or-register-selector[data-v-3753176c]{display:flex;justify-content:space-around}.login-or-register-selector .selector-on[data-v-3753176c]{background-color:#007aff;color:#fff;padding:%?20?%;border-radius:10px}.login-or-register-selector .selector-default[data-v-3753176c]{background-color:#fff;padding:%?20?%;border-radius:10px}.login-container[data-v-3753176c]{position:absolute;width:70%;top:20%;left:10%;padding:%?30?%;border:1px solid #000}.login-box[data-v-3753176c], .register-box[data-v-3753176c]{padding:0 %?10?%}.user-text[data-v-3753176c]{font-size:%?40?%;margin-bottom:%?30?%}',""]),e.exports=t},a96a:function(e,t,a){var r=a("9cb6");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("4f06").default;n("916f0880",r,!0,{sourceMap:!1,shadowMode:!1})},b645:function(e,t,a){"use strict";a("7a82");var r=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("c7eb")),s=r(a("1da1")),o=r(a("5530")),i=a("26cb"),c={data:function(){return{vcode:"",select:1,routes:[{to:"/login",name:"登录"},{to:"/register",name:"注册"}],baseFormData:{name:"",password:"",vcode:""}}},computed:(0,o.default)({},(0,i.mapState)("m_user",["userId","userName"])),methods:(0,o.default)((0,o.default)({},(0,i.mapMutations)("m_user",["changeUserName","changeUserId","removeUser","changeJWT"])),{},{login:function(){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var a,r;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.baseFormData.name&&e.baseFormData.password&&e.baseFormData.vcode){t.next=2;break}return t.abrupt("return",uni.$showMsg("请输入用户名或密码"));case 2:return t.next=4,uni.$http.post("/user/login",{username:e.baseFormData.name,password:e.baseFormData.password,vcode:e.baseFormData.vcode});case 4:a=t.sent,r=a.data,uni.$showMsg(r.msg),1===r.code&&(e.changeUserId(r.userId),e.changeUserName(r.userName),e.changeJWT(r.jwt),uni.setStorageSync("name",e.baseFormData.name),uni.setStorageSync("password",e.baseFormData.password));case 8:case"end":return t.stop()}}),t)})))()},register:function(e){var t=this;return(0,s.default)((0,n.default)().mark((function a(){var r,s;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.phone){a.next=2;break}return a.abrupt("return",uni.$showMsg("请输入手机号"));case 2:if(e.password){a.next=4;break}return a.abrupt("return",uni.$showMsg("请输入密码"));case 4:if(e.passwordRep){a.next=6;break}return a.abrupt("return",uni.$showMsg("请重复密码"));case 6:if(e.vcode){a.next=8;break}return a.abrupt("return",uni.$showMsg("请输入验证码"));case 8:if(e.password==e.passwordRep){a.next=10;break}return a.abrupt("return",uni.$showMsg("密码不一致"));case 10:return a.next=12,uni.$http.post("/user/register",{phone:e.phone,password:e.password,vcode:e.vcode});case 12:r=a.sent,s=r.data,uni.$showMsg(s.msg),1===s.code&&(t.changeUserId(s.userId),t.changeUserName(s.userName),t.changeJWT(s.jwt),uni.setStorageSync("name",t.baseFormData.name),uni.setStorageSync("password",t.baseFormData.password));case 16:case"end":return a.stop()}}),a)})))()},logout:function(){this.removeUser()},changeSelect:function(e){this.select!=e&&(this.select=e)},getCodePic:function(){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var a,r;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uni.$http.get("/common/vcode");case 2:a=t.sent,r=a.data,1==r.code&&(e.vcode=r.data);case 5:case"end":return t.stop()}}),t)})))()}}),onShow:function(){this.baseFormData.name=uni.getStorageSync("name")||"",this.baseFormData.password=uni.getStorageSync("password")||"",this.getCodePic()}};t.default=c},f288:function(e,t,a){"use strict";var r=a("a96a"),n=a.n(r);n.a}}]);